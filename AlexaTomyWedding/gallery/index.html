<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:image" itemprop="image" content="/images/bride.png">
  <meta property="og:description" content="Tomy & Alexa Virtual Wedding Reception">

  <title>Alexa & Tomy | Virtual Wedding</title>
  <link rel="icon" href="../images/favicon-16.png">

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-tour/0.12.0/css/bootstrap-tour-standalone.min.css">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel&family=Exo:wght@200&family=Kodchasan&family=Questrial&display=swap" rel="stylesheet">

  <!-- CSS Stylesheet  -->
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="css/gallery.css">
  <link rel="stylesheet" href="css/responsive.css">

</head>

<body>
  <div class="mobile-content">
    <h1>Please access this website from desktop</h1>
    <h2>Can't wait to see you!</h2>
  </div>

  <div class="browser-resize">
    <h1>Please maximize your browser for the full experience</h1>
  </div>

  <div class="browserZoomOut">
    <h1>Please zoom out your browser for the full experience</h1>
  </div>

  <div class="browserZoomIn">
    <h1>Please zoom in your browser for the full experience</h1>
  </div>

  <!-- lOADER -->
  <div id="loading" class="loader">
    <div class="load-content">
      <img src="images/loadtext.webp" alt="text" class="loadtext">
      <img src="images/loading.svg" alt="loading" class="loader-icon" />
    </div>

  </div>

  <div class="firstScreenPrewed">
    <img src="images/splash.png" alt="">
  </div>

  <div class="desktop-content">
    <div class="gallery-page">
      <div class="home-button">
        <img src="images/home-button.png" alt="">
      </div>

      <!-- Video Call Modal -->
      <div id="vcallModal" class="modal">
        <div class="modal-content content-vcall">
          <h2 class="lang text titleVcall" key="vcall_0">Mari Bersiap!</h2>
          <div class="timer">
            <span>- </span>
            <span>00:0</span><span class="seconds2"></span>
          </div>
          <h4 class="lang text" key="vcall_1">Sebentar lagi kamu akan bertemu dengan mempelai.</h4>
          <h5 class="lang text" key="vcall_2">Sambil menunggu mempelai datang, host video call akan memandu tata cara video call. </h5>
        </div>
      </div>

      <!-- Pop Up Akad -->
      <div class="content-wrapper wrapper-akad">
        <div class="left-wrapper">
          <div class="back-button">
            <img src="images/back.png" class="btn-back" alt="back">
            <p class="lang" key="backGallery">Kembali ke Galeri</p>
          </div>
          <div class="text-content">
            <h4>Akad Nikah</h4>
            <p class="custom-p lang" key="akad_1">berlangsung 5 September 2020</p>
            <p class="lang" key="akad_2">jam 15:00-17:00,</p>
            <p class="lang" key="akad_3"> di Pendopo Kemang, Jakarta Selatan.</p>
            <p class="custom-p lang" key="akad_4">Alexa dan Tomy mengenakan pakaian adat Lampung, Sumatera dari keluarga nenek dari Bundanya Alexa</p>
          </div>
        </div>

        <div class="video-wrapper-2">
          <iframe id="video" src="https://www.youtube.com/embed/1ckYH-ERPvM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
      </div>

      <!-- Pop Up Lamaran -->
      <div class="content-wrapper wrapper-lamaran">
        <div class="left-wrapper">

          <div class="back-button">
            <img src="images/back.png" class="btn-back" alt="back">
            <p class="lang" key="backGallery">Kembali ke Galeri</p>
          </div>

          <div class="text-content">
            <h4>Lamaran</h4>

            <p class="custom-p lang" key="lamaran_1">Merupakan salah satu rangkaian acara dalam sebuah pernikahan. Dalam acara ini Tomy dan keluarga datang ke rumah Alexa </p>
            <p class="custom-p lang" key="lamaran_2">untuk bertemu keluarga Alexa dan melamarnya, dengan membawa seserahan. Acara ini berlangsung satu hari sebelum pernikahan.</p>
          </div>

        </div>

        <div class="video-wrapper-2">
          <iframe id="video" src="https://www.youtube.com/embed/5NhZeB4wXKg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
      </div>

      <!-- Countdown -->
      <div class="countdown countdown-page">
        <div class="inner-countdown">
          <span class="vl"></span>
          <p class="lang" key="countdown">Bertemu mempelai dalam</p>
          <span>- </span>
          <span class="hours textResize"></span><span class="minutes textResize"></span><span class="seconds textResize"></span>
        </div>
      </div>


      <!-- <a href="prewed">
        <div class="wrapper-prewed"></div>
      </a>
      <div class="wrapper-lamaran"></div>
      <div class="wrapper-akad"></div> -->

      <div class="parent-prewed">
        <!-- <a href="prewed"> -->
          <div class="div-prewed"></div>
          <div class="prewed"></div>
          <img src="images/prewed-select.png" alt="">
        <!-- </a> -->
      </div>

      <div class="parent-lamaran">
        <div class="div-lamaran"></div>
        <div class="lamaran"></div>
        <img src="images/lamaran-select.png" alt="">
      </div>

      <div class="parent-akad">
        <div class="div-akad"></div>
        <div class="akad"></div>
        <img src="images/akad-select.png" alt="">
      </div>


      <div id="live-mc" class="live-mc"></div>
      <div class="video-mc">
        <div class="video-wrapper">
          <iframe id="videoMC" src="https://www.youtube.com/embed/hxuBd7VOGvY?enablejsapi=1&autoplay=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          <div class="screen-wrapper"></div>
        </div>
        <img class="on on-page" src="../images/tv-on.png" alt="">
        <img class="off off-page" src="../images/tv-off.png" alt="">
      </div>

    </div>
  </div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-tour/0.12.0/js/bootstrap-tour-standalone.min.js" charset="utf-8"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js" charset="utf-8"></script>
  <script type="text/javascript" src="../index.js"></script>

  <script type="text/javascript">
    // lOADER
    var fadeOutScreen = localStorage.getItem('fadeOutScreen');
    $('html, body').css({
      overflow: 'hidden',
      height: '100%'
    });

    $(window).on('load', function() {

      $('html, body').css({
        overflow: 'hidden',
        height: 'auto'
      })

      $("#loading").addClass("loader-hidden");

    });


    // Path
    var dirPath = dirname(location.href);
    var homePath = RemoveLastDirectoryPartOf(dirPath);

    function dirname(path) {
      return path.replace(/\\/g, '/').replace(/\/[^\/]*$/, '');
    }

    function RemoveLastDirectoryPartOf(the_url) {
      var the_arr = the_url.split('/');
      the_arr.pop();
      return (the_arr.join('/'));
    }

    $(".div-prewed").click(function(){
      console.log("masuk1");
      $(".firstScreenPrewed").fadeIn(1000).delay(500);
      $(".firstScreenPrewed").queue(function(next){
        console.log("masuk sini gaksih");
        window.location = dirPath + "/prewed";
        next();
      });


    });

    $(".home-button").click(function() {
      window.location = homePath;
    });

    // Menu click
    $(".div-akad").click(function() {
      $(".wrapper-akad").css("display", "block");
    });

    $(".div-lamaran").click(function() {
      $(".wrapper-lamaran").css("display", "block");
    });

    $(".btn-back").click(function() {
      $(".wrapper-lamaran").css("display", "none");
      $(".wrapper-akad").css("display", "none");
    });

    // TOKEN DATA
    var name = null;
    var idPosition = null;

    cookieToken = $.cookie("token");
    console.log("token " + cookieToken);

    console.log("localStorageeeeeee ");
    console.log(localStorage);

    if (localStorage.getItem("nama") == null) {
      localStorage.clear();
      console.log("clear localStorage");
      var loginPath = homePath + "/login";
      window.location = loginPath;

    }

    $.ajax({
      url: "https://webnikahapi.arthatronic.com/api/user/",
      async: false,
      type: "GET",
      global: false,
      // Fetch the stored token from localStorage and set in the header
      headers: {
        "Authorization": "Token " + cookieToken
      },
      success: function(result) {
        console.log(result);
        name = result[0].name;
        timeSet = result[0].time;
        idPosition = result[0].id_room;
        console.log(name);
        console.log(timeSet);

      },
      error: function(err) {
        console.log(err);
      }
    });

    var endTime = new Date("5 September 2020 " + timeSet + " GMT+07:00");

    console.log("endtimeeeee" + endTime);

    endTime = (Date.parse(endTime) / 1000);

    var timeLeft;

       function httpGet(theUrl)
  {
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.open( "GET", theUrl, false ); // false for synchronous request
    xmlHttp.send( null );
    return xmlHttp.responseText;
  }

  var masuk = false;

    function makeTimer() {

      var coba = new Date();
      //var obj = JSON.parse(coba);

      //timeNow = (obj.unixtime);
      timeNow = (Date.parse(coba) / 1000);

      var timeLeft = endTime - timeNow;
      // console.log("timeleft " + timeLeft);
      var days = Math.floor(timeLeft / 86400);
      var hours = Math.floor((timeLeft - (days * 86400)) / 3600);
      var minutes = Math.floor((timeLeft - (days * 86400) - (hours * 3600)) / 60);
      var seconds = Math.floor((timeLeft - (days * 86400) - (hours * 3600) - (minutes * 60)));

      if (hours < "10") {
        hours = "0" + hours;
      }
      if (minutes < "10") {
        minutes = "0" + minutes;
      }
      if (seconds < "10") {
        seconds = "0" + seconds;
      }

      if (hours <= "23" && hours >= "7") {
        $(".countdown").css("display", "none");
      } else {
        $(".countdown").css("display", "block");
      }

      $(".hours").html(hours + "<span> :</span>");
      $(".minutes").html(minutes + "<span> :</span>");
      $(".seconds").html(seconds);

      console.log(hours + ":" + minutes + ":" + seconds);

      // Popup Vcall
      if (timeLeft <= 0 && timeLeft >= -360) {

        $("#vcallModal").css('display', 'block');

        var counterVcall;
        if(masuk == false){
            counterVcall = 4;
            masuk = true;

            var interval = setInterval(function() {
            // Display 'counter' wherever you want to display it.
            counterVcall--;
            $(".seconds2").html(counterVcall);

            console.log("countervcall " + counterVcall);
            if (counterVcall == 0) {
              // Display a login box
              clearInterval(interval);
              $("#vcallModal").css('display', 'block');
              console.log(dirPath);
              var fullPath = homePath + "/Vcall";
              console.log(fullPath);
              window.location = fullPath;
              // return false;
            }
          }, 1000);
          }

      }

    }
    // end of function maketimercall

    setInterval(function() {
      makeTimer();
    }, 1000);
  </script>

</body>

</html>
